PREFIX : <http://jena.apache.org/fuseki#>
PREFIX schema: <https://id.example.org/schema/>
PREFIX ja: <http://jena.hpl.hp.com/2005/11/Assembler#>
PREFIX tdb2: <http://jena.apache.org/2016/tdb#>
PREFIX text: <http://jena.apache.org/text#>

[
    a :Service ;

    # The path prefix for this service
    # Empty string makes it the root
    :name "" ;

    :endpoint [
        # A SPARQL endpoint
        :operation :query ;

        # The path prefix for this endpoint
        :name "sparql"
    ] ;

    # The data exposed by this service
    :dataset [
        # RDFS inferencing
        # See https://jena.apache.org/documentation/rdfs/
        # Might be better with https://jena.apache.org/documentation/inference/#rdfs
        a ja:DatasetRDFS ;

        # The RDFS ontology used for inferencing
        ja:rdfsSchema "./vocabulary.ttl" ;

        # The underlying instance graph we're inferring from
        ja:dataset [
            # Full-text search
            # See https://jena.apache.org/documentation/query/text-query.html
            a text:TextDataset ;

            text:index [
                a text:TextIndexLucene ;

                text:storeValues true ;

                # The location on disk where the index will be created by jena.textindexer
                text:directory "./fts-index/" ;

                text:entityMap <entityMap> ;
            ] ;

            # The underlying instance graph we're indexing
            text:dataset [
                a tdb2:DatasetTDB2 ;

                # The location on disk where the data will be populated from
                tdb2:location "./db/" ;
            ] ;
        ] ;
    ] ;
] .

# This must be a URI node for some reason.
<entityMap>
    a text:EntityMap ;
    text:entityField "uri" ;
    text:defaultField "activityLabel" ;
    text:uidField "uid" ;
    text:map (
        [
            text:field "activityLabel" ;
            text:predicate schema:activityLabel ;
        ]
        [
            text:field "activityDescription" ;
            text:predicate schema:activityDescription ;
        ]
        [
            text:field "organisationLabel" ;
            text:predicate schema:organisationLabel ;
        ]
        [
            text:field "organisationDescription" ;
            text:predicate schema:organisationDescription ;
        ]
    ) ;
.
